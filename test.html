<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Test of HS Open Indicator</title>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="js/open.js" charset="utf-8"></script>
  </head>


  <body>
    <h1>HS Open Status Indicator</h1>
    <h2>Examples</h2>

    <div id="hs-state-container"><del>Hackerspace Krak√≥w</del><ins>bytewerk</ins> is <span id="hs-state"></span><br />
    Last updated: <span id="hs-timestamp"></span></div>

    <script>
function updateTimestamp(state) {
    var statusString = 'Not Available';
    if(state.lastchange) {
        var date = new Date(state.lastchange * 1000);
        statusString = date.getDate() + '.' + (date.getMonth() + 1) + '.' + date.getFullYear() + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds();
    }
    jQuery('#hs-timestamp').html(statusString);
}

HSIndicator("http://spaceapi.hskrk.pl").onOpen(function() {
//HSIndicator("http://spaceapi.net/cache/bytewerk").onOpen(function() {
//HSIndicator("http://club.entropia.de/spaceapi").onOpen(function() {
//HSIndicator("http://hive13.org/isOpen/api.php").onOpen(function() {
    jQuery('#hs-state-container').css('background-color', 'green');
    jQuery('#hs-state').html('OPEN');
// }).onOpen(updateTimestamp).onClosed(function() {
//     jQuery('#hs-state-container').css('background-color', 'red');
//     jQuery('#hs-state').html('CLOSED');
}).onClosed(updateTimestamp)
.start();
// }).onClosed(function() {

// });

    </script>
  </body>

</html>
